<%- contentFor('head') %>
<script src="/libraries/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/scripts/invites.js" type="text/javascript"></script>
<%- contentFor('body') %>
<div class="row justify-content-center" role="main">
  <div class="col-sm-6 col-md-4 col-lg-3 mt-3">
    <% if (!invite || invite.acceptedAt || invite.revokedAt) { %>
      <h1 class="h2">Invalid invite</h1>
      <p>Please request a new invite if needed.</p>
    <% } else { %>
      <h1 class="h2">You're invited!</h1>
      <p>You've been invited to join the SF Pest team for <b><%= invite.property.name %></b>.</p>
      <form id="register" method="post" style="display: <%= show == 'register' ? 'block' : 'none' %>;">
        <input type="hidden" name="accept" value="register">
        <p>Submit the form below to create a new SF Pest account and accept this invite.</p>
        <p>Already have an SF Pest account? <a id="register__login" href="#">Click here</a></p>
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input type="text" class="form-control<%= hasError('firstName') ? ' is-invalid' : '' %>" name="firstName" value="<%= user.firstName %>">
          <%- renderErrorMessages('firstName') %>
        </div>
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input type="text" class="form-control<%= hasError('lastName') ? ' is-invalid' : '' %>" name="lastName" value="<%= user.lastName %>">
          <%- renderErrorMessages('lastName') %>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="text" class="form-control<%= hasError('email') ? ' is-invalid' : '' %>" name="email" value="<%= user.email %>">
          <%- renderErrorMessages('email') %>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control<%= hasError('password') ? ' is-invalid' : '' %>" name="password">
          <%- renderErrorMessages('password') %>
        </div>
        <button type="submit" class="btn btn-block btn-primary">Submit</button>
      </form>
      <form id="login" method="post" style="display: <%= show == 'login' ? 'block' : 'none' %>;">
        <input type="hidden" name="accept" value="login">
        <p>Log in below to accept this invite.</p>
        <p>Don't have an SF Pest account? <a id="login__register" href="#">Click here</a></p>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="text" class="form-control" name="email" value="<%= user.email %>">
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" name="password">
        </div>
        <button type="submit" class="btn btn-block btn-primary">Submit</button>
      </form>
    <% } %>
  </div>
</div>
