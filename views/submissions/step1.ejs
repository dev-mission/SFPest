<%- contentFor('head') %>
<script src="/libraries/cleave/cleave.min.js" type="text/javascript"></script>
<script src="/libraries/cleave/addons/cleave-phone.us.js" type="text/javascript"></script>
<script src="/libraries/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/scripts/submissions.js" type="text/javascript"></script>
<%- contentFor('body') %>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-8 col-md-6 col-lg-4">
      <div class="card mt-4">
        <div class="card-header">
          <h1 class="card-title h5 mb-0"><%= property.name %></h1>
        </div>
        <div class="card-body">
          <h1 class="card-title h5">New Pest Report</h1>
          <form method="post" action="/<%= property.urlId %>" encType="multipart/form-data">
            <div class="form-group">
              <label>What is it?</label>
              <select class="form-control" name="what">
                <% for (let pest of what) { %>
                <option value="<%= pest %>" <%= report.what == pest ? 'selected': '' %>><%= __(pest) %></option>
                <% } %>
              </select>
            </div>

            <div id="other" class="form-group" style="display: <%= report.what == 'other' ? 'block' : 'none' %>;">
              <input type="text" class="form-control<%= hasError('whatOther') ? ' is-invalid' : '' %>" name="other" value="<%= report.other %>" placeholder="Please describe...">
              <%- renderErrorMessages('whatOther') %>
            </div>

            <div class="form-group">
              <label>Where did you see it?</label>
              <textarea class="form-control<%= hasError('location') ? ' is-invalid' : '' %>" rows="4" name="location" placeholder="Example: In the kitchen under the sink"><%= report.location %></textarea>
              <%- renderErrorMessages('location') %>
            </div>

            <div class="form-group">
              <label>Picture (Optional)</label>
              <input type="file" class="form-control" name="picture" />
              <input type="hidden" name="pictureUrl" value="<%= report.pictureUrl %>">
            </div>

            <div class="form-group">
              <label>Phone Number</label>
              <input type="tel" class="form-control<%= hasError('phone') ? ' is-invalid' : '' %>" name="phone" value="<%= report.phone %>" />
              <%- renderErrorMessages('phone') %>
            </div>

            <div class="form-group">
              <button class="btn btn-primary btn-block" type="submit">Next</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
